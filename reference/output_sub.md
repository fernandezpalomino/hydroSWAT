# Read SWAT subbasin output

Reads the `output.sub` file generated by SWAT, allowing users to filter
the data by variables, subbasin IDs, and time steps (daily or monthly).

## Usage

``` r
output_sub(
  file = "output.sub",
  variable = NULL,
  target_id = NULL,
  time_step = "daily",
  output_start_date
)
```

## Arguments

- file:

  Character. Absolute path to the `output.sub` file. Default is
  "output.sub".

- variable:

  Character vector with the names of variables to read. Use
  [`get_swat_vars`](https://fernandezpalomino.github.io/hydroSWAT/reference/get_swat_vars.md)`("sub")`
  to list all options. If `NULL`, all variables are read.

- target_id:

  Numeric vector of subbasin IDs to extract. Default `NULL` retrieves
  all subbasins.

- time_step:

  Character. Time step of the simulation ("daily" or "monthly"). Default
  is "daily".

- output_start_date:

  Character. Date when SWAT output generation begins (first day after
  warm-up), in "yyyy-mm-dd" format.

## Value

A `data.frame` with the selected variables for each subbasin and time
step. Columns "SUB" (subbasin ID) and "MON" (Date) are always included.

## See also

Other Output readers:
[`get_swat_vars()`](https://fernandezpalomino.github.io/hydroSWAT/reference/get_swat_vars.md),
[`output_hru()`](https://fernandezpalomino.github.io/hydroSWAT/reference/output_hru.md),
[`output_rch()`](https://fernandezpalomino.github.io/hydroSWAT/reference/output_rch.md),
[`read_pcp()`](https://fernandezpalomino.github.io/hydroSWAT/reference/read_pcp.md),
[`read_tmp()`](https://fernandezpalomino.github.io/hydroSWAT/reference/read_tmp.md)

## Examples

``` r
# Example with package data
tmpdir <- tempdir()
get_swat_example(tmpdir)
#> SWAT TxtInOut files written to: /tmp/RtmpitMhWQ/TxtInOut
sub_file <- file.path(tmpdir, "TxtInOut", "output.sub")
sub_data <- output_sub(file = sub_file, variable = c("PRECIPmm", "ETmm", "WYLDmm"),
                       target_id = NULL, time_step = "daily",
                       output_start_date = "2011-01-01")
head(sub_data)
#> # A tibble: 6 Ã— 5
#>     SUB MON        PRECIPmm  ETmm WYLDmm
#>   <dbl> <date>        <dbl> <dbl>  <dbl>
#> 1     1 2011-01-01      2.6  3.09 0.394 
#> 2     1 2011-01-02      0.3  2.15 0.245 
#> 3     1 2011-01-03      0.7  2.35 0.165 
#> 4     1 2011-01-04      0.5  2.2  0.12  
#> 5     1 2011-01-05      0.2  1.91 0.0924
#> 6     1 2011-01-06      1.1  2.19 0.0747

if (FALSE) { # \dontrun{
# Example with external SWAT project
sub_data <- output_sub(file = "C:/SWAT_Project/TxtInOut/output.sub",
                       variable = c("WYLDmm"), target_id = c(1, 2),
                       time_step = "daily",
                       output_start_date = "2000-01-01")
} # }
```
